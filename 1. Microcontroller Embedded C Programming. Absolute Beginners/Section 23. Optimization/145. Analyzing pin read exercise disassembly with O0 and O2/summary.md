Компіляція коду з [I/O read](../../Section%2022.%20Pin-read/142.%20IO%20pin%20read%20exercise%20implementation/summary.md) із оптимізацією прапорцями -O2+ не є успішною, код перестає працювати.  

При звичайній оптимізації O0/O1, код працює, бо з кожною ітерацією циклу відбувається зчитування статусу піна з реєстру вводу GPIOA.  
Оптимізація O2+ робить так, щоб ця змінна зчитувалась лише раз, а далі використовувалась збережена копія, тобто з кожним циклом змінна не оновлюється, бо не відбувається зчитування статусу піна з регістру. Таким чином, код працює швидше, але не відповідає поставленому завданню.

```c
while (1) {
    uint8_t pinStatus = (uint8_t)(*pPortAInReg & 0x1); // read the 0th bit

    if (pinStatus) {
        *pClkCtrlReg |= (1 << 12); // set 12th bit to 1
    } else {
        *pClkCtrlReg &= ~(1 << 12); // clear 12th bit

    }
}
```

Для того, щоб компілятор не оптимізував `pPortAInReg`, необхідно позначити цю змінну як `volatile`. Таким чином, ми вказуємо компілятору, щоб він не оптимізував цю конкретну змінну. Про це дивись [тут](../../Section%2024.%20'volatile'%20type%20qualifier/)